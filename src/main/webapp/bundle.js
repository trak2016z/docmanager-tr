!function(t){function e(r){if(i[r])return i[r].exports;var a=i[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var r=i(1),a=function(){function t(){}return t}();e.App=a,window.onload=function(){var t,e=window.location.toString().split("/").pop();switch(e){case"register":t=new r.RegisterView}}},function(t,e,i){"use strict";var r=i(3),a=i(2),n=function(){function t(){this.userValidator=new a.UserValidator,this.init()}return t.prototype.init=function(){var t=this;this.form=$("#form-register"),this.registerButton=this.form.find(".form-register-button"),this.encryptor=new jsSHA("SHA-512","TEXT"),this.registerFailedModal=$("#registerFailedModal"),this.registerSuccededModal=$("#registerSuccededModal"),this.emailInput=this.form.find(".email-edit"),this.passwordInput=this.form.find(".pw-edit"),this.firstNameInput=this.form.find(".fname-edit"),this.middleNameInput=this.form.find(".mname-edit"),this.lastNameInput=this.form.find(".lname-edit"),this.dobInput=this.form.find(".dob-edit"),this.phoneInput=this.form.find(".phone-edit"),this.emailInput.change(),this.registerButton.click(function(){var e=t.getDataFromForm(),i=t.validateData(e);i&&(e=t.encryptPassword(e),r.RegisterService.registerUser(e,function(){t.registerSuccededModal.find(".succededbtn").click(function(){window.location.href=window.location.href+"/.."}),t.registerSuccededModal.modal("toggle")},function(){t.registerFailedModal.modal("toggle")}))})},t.prototype.encryptPassword=function(t){this.encryptor.update(t.password);var e=this.encryptor.getHash("HEX");return t.password=e,t},t.prototype.getDataFromForm=function(){var t=this.emailInput.val(),e=this.passwordInput.val(),i=this.firstNameInput.val(),r=this.lastNameInput.val(),a=this.phoneInput.val(),n=this.dobInput.val(),o=this.middleNameInput.val(),s={dob:n,firstName:i,password:e,lastName:r,phone:a,email:t,middleName:o};return s},t.prototype.validateData=function(t){var e=!0;return this.validateEmail(t.email)||(e=!1),this.validateDob(t.dob)||(e=!1),this.validatePassword(t.password)||(e=!1),this.validateFirstName(t.firstName)||(e=!1),this.validateLastName(t.lastName)||(e=!1),this.validatePhone(t.phone)||(e=!1),e},t.prototype.validateFirstName=function(t){var e=this.form.find(".fname-group .fname-warn");return e.text(""),!!t||(e.text("Nie podano imienia"),!1)},t.prototype.validateLastName=function(t){var e=this.form.find(".lname-group .lname-warn");return e.text(""),!!t||(e.text("Nie podano nazwiska"),!1)},t.prototype.validatePhone=function(t){var e=this.form.find(".phone-group .phone-warn");return e.text(""),!!t||(e.text("Nie podano numeru telefonu"),!1)},t.prototype.validateDob=function(t){var e=this.form.find(".dob-group .dob-warn");return e.text(""),!!t||(e.text("Nie podano daty urodzenia"),!1)},t.prototype.validatePassword=function(t){var e=this.form.find(".pw-group .pw-warn");return t?!(t.length<8)||(e.text("Hasło jest za ktotkie"),!1):(e.text("Nie podano hasła"),!1)},t.prototype.validateEmail=function(t){var e=this.form.find(".email-group .email-warn");return e.text(""),t?this.userValidator.isEmailValid(t)?(r.RegisterService.checkAvailableEmail(t,function(t){return e.text("Adres zajęty"),!t}),!0):(e.text("Nieprawidłowy adres"),!1):(e.text("Brak adresu email"),!1)},t}();e.RegisterView=n},function(t,e){"use strict";var i=function(){function t(){}return t.prototype.isEmailValid=function(t){var e=t.split("@");if(2!==e.length)return!1;var i=e[1].split(".");return!(i.length<2)},t}();e.UserValidator=i},function(t,e){"use strict";var i=function(){function t(){}return t.registerUser=function(t,e,i){$.ajax({url:"register/registerUser",context:document.body,type:"POST",contentType:"application/json; charset=utf-8",dataType:"text",async:!1,data:JSON.stringify(t)}).done(e).fail(i)},t.checkAvailableEmail=function(t,e){$.ajax({url:"register/userAvailable",context:document.body,type:"GET",contentType:"application/json; charset=utf-8",dataType:"text",async:!1,data:"email="+t}).done(e)},t}();e.RegisterService=i}]);
//# sourceMappingURL=bundle.js.map